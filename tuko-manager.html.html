<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tuko Question Manager</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.1/font/bootstrap-icons.min.css" rel="stylesheet">
    <link href="tuko-styles.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <div class="row app-header">
            <div class="col-md-6">
                <h1 class="app-title">
                    <i class="bi bi-heart-text-square-fill"></i> Tuko Question Manager
                </h1>
                <p class="text-muted">Manage conversation questions for the Tuko app</p>
            </div>
            <div class="col-md-6 text-end">
                <button id="exportBtn" class="btn btn-outline-primary me-2">
                    <i class="bi bi-download"></i> Export Questions
                </button>
                <button id="importBtn" class="btn btn-outline-secondary">
                    <i class="bi bi-upload"></i> Import Questions
                </button>
            </div>
        </div>

        <!-- Question Stats -->
        <div class="row mb-4">
            <div class="col-md-4">
                <div class="card stats-card light-category-bg">
                    <div class="stats-count" id="lightCount">0</div>
                    <div class="stats-label">Light Questions</div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card stats-card medium-category-bg">
                    <div class="stats-count" id="mediumCount">0</div>
                    <div class="stats-label">Medium Questions</div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card stats-card deep-category-bg">
                    <div class="stats-count" id="deepCount">0</div>
                    <div class="stats-label">Deep Questions</div>
                </div>
            </div>
        </div>

        <!-- Category Selector -->
        <div class="category-selector">
            <div class="btn-group" role="group">
                <button type="button" class="btn btn-outline-primary category-btn light-category active" data-category="light">Light</button>
                <button type="button" class="btn btn-outline-primary category-btn medium-category" data-category="medium">Medium</button>
                <button type="button" class="btn btn-outline-primary category-btn deep-category" data-category="deep">Deep</button>
                <button type="button" class="btn btn-outline-primary category-btn" data-category="all">All Questions</button>
            </div>
        </div>

        <!-- New Question Form -->
        <div class="card mb-4">
            <div class="card-header bg-white d-flex justify-content-between align-items-center">
                <span>Add New Question</span>
            </div>
            <div class="card-body">
                <form id="newQuestionForm">
                    <div class="row mb-3">
                        <div class="col-md-9">
                            <textarea class="form-control" id="newQuestionText" rows="2" placeholder="Enter a new question..."></textarea>
                        </div>
                        <div class="col-md-3">
                            <select class="form-select" id="newQuestionCategory">
                                <option value="light">Light</option>
                                <option value="medium">Medium</option>
                                <option value="deep">Deep</option>
                            </select>
                        </div>
                    </div>
                    <div class="text-end">
                        <button type="submit" class="btn btn-primary">Add Question</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Questions List -->
        <div class="card">
            <div class="card-header bg-white d-flex justify-content-between align-items-center">
                <span>Questions</span>
                <div>
                    <div class="input-group">
                        <input type="text" id="searchInput" class="form-control" placeholder="Search questions...">
                        <button class="btn btn-outline-secondary" type="button" id="clearSearchBtn">
                            <i class="bi bi-x"></i>
                        </button>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div id="loader" class="loader"></div>
                <div id="questionsList"></div>
            </div>
        </div>

        <!-- Export Area -->
        <div id="exportArea" class="card">
            <div class="card-header bg-white d-flex justify-content-between align-items-center">
                <span>Export Questions</span>
                <div>
                    <button id="downloadSwiftBtn" class="btn btn-sm btn-outline-primary me-2">
                        <i class="bi bi-download"></i> Download Questions.swift
                    </button>
                </div>
            </div>
            <div class="card-body">
                <p>Copy the code below and paste it into your Swift file, or use the download button:</p>
                <textarea id="exportData" class="form-control"></textarea>
                <div class="d-flex justify-content-between mt-3">
                    <button id="copyExportBtn" class="btn btn-primary">
                        <i class="bi bi-clipboard"></i> Copy to Clipboard
                    </button>
                    <button id="closeExportBtn" class="btn btn-secondary">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Question Modal -->
    <div class="modal fade" id="editQuestionModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Edit Question</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editQuestionForm">
                        <input type="hidden" id="editQuestionId">
                        <div class="mb-3">
                            <label for="editQuestionText" class="form-label">Question Text</label>
                            <textarea class="form-control" id="editQuestionText" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="editQuestionCategory" class="form-label">Category</label>
                            <select class="form-select" id="editQuestionCategory">
                                <option value="light">Light</option>
                                <option value="medium">Medium</option>
                                <option value="deep">Deep</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveQuestionBtn">Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Import Modal -->
    <div class="modal fade" id="importModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Import Questions</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul class="nav nav-tabs" id="importTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="swift-tab" data-bs-toggle="tab" data-bs-target="#swift-content" type="button" role="tab">
                                Import from Questions.swift
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="json-tab" data-bs-toggle="tab" data-bs-target="#json-content" type="button" role="tab">
                                Import from JSON
                            </button>
                        </li>
                    </ul>
                    
                    <div class="tab-content mt-3" id="importTabContent">
                        <!-- Swift Import Tab -->
                        <div class="tab-pane fade show active" id="swift-content" role="tabpanel">
                            <p>Paste the content of your Questions.swift file:</p>
                            <textarea class="form-control" id="importSwiftData" rows="12"></textarea>
                            <div class="mt-3 alert alert-info">
                                <small>
                                    <p><strong>How it works:</strong> The parser will extract questions from Swift arrays like <code>static let light = ["Question 1", "Question 2"]</code> format.</p>
                                    <p>This will merge with your existing questions. Duplicate questions will be skipped.</p>
                                </small>
                            </div>
                        </div>
                        
                        <!-- JSON Import Tab -->
                        <div class="tab-pane fade" id="json-content" role="tabpanel">
                            <p>Paste your question data in JSON format:</p>
                            <textarea class="form-control" id="importData" rows="12"></textarea>
                            <div class="mt-3 alert alert-info">
                                <small>
                                    <p><strong>Expected format:</strong> <code>{"light": ["Question 1", "Question 2"], "medium": [...], "deep": [...]}</code></p>
                                    <p>This will merge with your existing questions. Duplicate questions will be skipped.</p>
                                </small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="confirmImportBtn">Import</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirm Delete Modal -->
    <div class="modal fade" id="deleteConfirmModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Confirm Delete</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to delete this question?</p>
                    <p id="deleteQuestionText" class="font-italic"></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="tuko-app.js"></script>
</body>
</html>